# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

# –ë–∏–∑–Ω–µ—Å —Å—Ü–µ–Ω–∞—Ä–∏–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- **–¶–µ–ª—å**: –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 1**: Latency < 100 –º—Å –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 2**: CTR –Ω–∞ 10%
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3**: –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Ñ–∏—á –≤ offline/online
- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 4 (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ)**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ö–æ–ª–æ–¥–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–µ—Ä–æ–≤

## –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
- **–ó–∞–ø—É—Å–∫ –∫–∞–∂–¥–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è**: –ö–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Ä–µ—à–∏–ª –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –ø–∞–ø–∫–∏ (zadanie 1, zadanie 2 ...)
docker-compose up -d



# –ó–∞–¥–∞–Ω–∏–µ 1

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã EDA —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
 –í—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ ml-production-lab4\artifacts\eda

 ![–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](Images/hourly_activity.png)

## –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

 –°—Ö–µ–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

|Name models|GradientBoosting|SVM|CatBoost|LightGBM|XGBoost|RandomForest|LogisticRegression|
|---|---|---|---|---|---|---|---|
|Name|Value|Value|Value|Value|Value|Value|Value|
|accuracy|0.948|0.339|0.941|0.948|0.94|0.924|0.923|
|f1_score|0.961|0.493|0.957|0.96|0.956|0.947|0.947|
|false_negatives|406|659|262|455|381|239|102|
|false_positives|2717|38955|3264|2681|3221|4319|4509|
|inference_time_ms|0.002|0.081|2.437e-4|0.002|6.661e-4|0.004|3.662e-5|
|precision|0.978|0.951|0.981|0.977|0.978|0.981|0.983|
|recall|0.948|0.339|0.941|0.948|0.94|0.924|0.923|
|roc_auc|0.961|0.361|0.965|0.958|0.958|0.955|0.968|
|specificity|0.954|0.338|0.945|0.954|0.945|0.927|0.923|
|training_time_seconds|207|373.6|9.543|3.31|4.091|29.87|0.431|
|true_negatives|56150|19912|55603|56186|55646|54548|54358|
|true_positives|686|433|830|637|711|853|990|

## –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ 

LightGBM –≤—ã–±—Ä–∞–Ω–∞ –∫–∞–∫ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–º—É —Å–æ—á–µ—Ç–∞–Ω–∏—é:

- **–í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π** (accuracy: 0.948, F1-score: 0.960)
- **–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞** (0.002 –º—Å –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å)
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** (–æ–±—É—á–µ–Ω–∏–µ –∑–∞ 3.31 —Å–µ–∫—É–Ω–¥—ã)
- **–•–æ—Ä–æ—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
- **–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–∏–µ –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π**

## –°–∫—Ä–∏–Ω—à–æ—Ç MLflow UI —Å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–º


![–°–∫—Ä–∏–Ω—à–æ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ MLflow](Images/image.png)


# –ó–∞–¥–∞–Ω–∏–µ 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Feature Store

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Feature Store

![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Feature Store](Images/arx-1.png)

## –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–∏—á

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ (`feature_repo/definitions.py`)
–°–æ–∑–¥–∞–Ω—ã —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö Feature View:
-   **user_stats_view**: –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π, –ø–æ–∫—É–ø–æ–∫, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫).
-   **product_stats_view**: –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç–æ–≤–∞—Ä–∞ (–ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å, –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫—É).
-   **user_product_interactions_view**: –ü—Ä–∏–∑–Ω–∞–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-—Ç–æ–≤–∞—Ä.

–ü—Ä–∏–º–µ—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:

user_stats_view = FeatureView(
    name="user_stats",
    entities=[user],
    ttl=timedelta(days=7),
    features=[
        Feature(name="user_total_events", dtype=Int64),
        Feature(name="user_total_purchases", dtype=Int64),
        Feature(name="user_avg_price", dtype=Float64),
    ],
    online=True,
    source=user_stats_source,
)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ —Å–∫—Ä–∏–ø—Ç–æ–º src/tests/test_consistency.py. –û–Ω–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–≤—É–º—è –ø—É—Ç—è–º–∏:

- **Offline-–ø—É—Ç—å:** –ß–µ—Ä–µ–∑ store.get_historical_features() (–¥–ª—è –æ–±—É—á–µ–Ω–∏—è).
- **Online-–ø—É—Ç—å:** –ß–µ—Ä–µ–∑ store.get_online_features() (–¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞)

## –í—ã–≤–æ–¥ –æ —Ç–æ–º, –∫–∞–∫ Feature Store —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É feature mismatch

–ü—Ä–æ–±–ª–µ–º–∞ Feature Mismatch (—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤) ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ML-—Å–∏—Å—Ç–µ–º, –∫–æ–≥–¥–∞ –∏–∑-–∑–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–¥–æ–±–∞–∑—ã –∏–ª–∏ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–∑–Ω–∞–∫–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏ (offline), –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤, –ø–æ–¥–∞–≤–∞–µ–º—ã—Ö –Ω–∞ –Ω–µ—ë –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (online). –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–∞–¥–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π.

–†–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç Feast:

- **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã (Single Source of Truth)**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è (Materialization)**
- **–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π API**
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ (Point-in-time correctness)**

# –ó–∞–¥–∞–Ω–∏–µ 3:  –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MLflow

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã MLflow UI —Å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏

![–í—Å–µ –º–æ–¥–µ–ª–∏ –æ–±—É—á–µ–Ω–∏—è](Images/models2.png)

![–õ—É—á—à–∞—è –º–æ–¥–µ–ª—å](Images/models-1.png)

## –ö–æ–¥ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ zadanie3/src/mlflow_utils/registry.py

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å       | ROC-AUC | Accuracy | F1-Score | Inference Time (ms) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                              |
|--------------|---------|----------|----------|---------------------|-----------------------------------------|
| XGBoost      | 0.959   | ~0.95    | ~0.96    | 31.2                | –õ—É—á—à–∞—è –º–æ–¥–µ–ª—å, –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –≤ Production  |
| RandomForest | 0.956   | ~0.931   | ~0.95    | 33.7                | –•–æ—Ä–æ—à–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å, –Ω–æ –Ω–∏–∂–µ AUC |

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ –∫–ª–∞—Å—Å–µ ModelValidator (src/models/validator.py) –∏ –≤–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:

- **–ö—Ä–∏—Ç–µ—Ä–∏–π –∫–∞—á–µ—Å—Ç–≤–∞ (AUC > 0.85)**
- **–ö—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Latency < 50 –º—Å)**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏**
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—ã—Ö–æ–¥–æ–≤.**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (A/B-—Ç–µ—Å—Ç –≤ –∫–æ–¥–µ)**

# –ß–∞—Å—Ç—å 4: –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –≤ production

## –ö–æ–¥ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å-—Å–µ—Ä–≤–∏—Å–∞

–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ FastAPI –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞.
–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (src/api/main.py)

![–†–µ–∞–ª–∏–∑–∞—Ü–∏—è](Images/api.png)

## –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Prometheus –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

![–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](Images/200.png)

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –¥–≤–µ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π.

- **src/deployment/canary.py (–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—è –º–µ—Ç—Ä–∏–∫–∏)**
- **src/deployment/shadow.py (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)**

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞ scripts/load_test.py

- **P95 latency: 49.63 ms**

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –≤ /artifacts/load_test_results/test_summary.json

# –ß–∞—Å—Ç—å 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–µ–π

## –ö–æ–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö

### 1.1 Data Drift Detection
–°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥—Ä–µ–π—Ñ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫:

**PSI (Population Stability Index):**

def _calculate_psi(reference, current, bins=10):
    # –†–∞—Å—á–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
    ref_percents = histogram(reference, bins) / len(reference)
    curr_percents = histogram(current, bins) / len(current)
    
    # PSI calculation
    psi = sum((curr - ref) * log(curr/ref) for curr, ref in zip(curr_percents, ref_percents))
    return psi


## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç—á–µ—Ç–æ–≤ –æ data drift

–°–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:

| –ú–µ—Ç—Ä–∏–∫–∞  | –ü–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è | –î–µ–π—Å—Ç–≤–∏–µ               |
|----------|--------------------|------------------------|
| Accuracy | –ü–∞–¥–µ–Ω–∏–µ > 10%      | Warning                |
| Accuracy | –ü–∞–¥–µ–Ω–∏–µ > 15%      | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retrain |
| ROC-AUC  | –ü–∞–¥–µ–Ω–∏–µ > 5%       | Warning                |
| F1-Score | < 0.7              | Warning                |

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥—Ä–µ–π—Ñ–∞**

def detect_concept_drift(X, y_true, y_pred):
    # –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –æ—à–∏–±–æ–∫ —Å –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏
    errors = (y_true != y_pred).astype(int)
    
    for feature in important_features:
        correlation = corrcoef(X[feature], errors)[0, 1]
        if abs(correlation) > 0.3:
            return True  # –û–±–Ω–∞—Ä—É–∂–µ–Ω concept drift
    
    return False

## –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–æ–≤**

alerts:
  data_drift:
    psi_threshold: 0.2
    ks_threshold: 0.1
    notification_channels: [slack, email]
    
  model_performance:
    accuracy_drop: 0.1
    auc_drop: 0.05
    notification_channels: [slack]
    
  retrain:
    automatic: true
    require_approval: false

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Slack**

{
  "attachments": [{
    "color": "#FF0000",
    "title": "üö® ML MONITORING ALERT",
    "text": "–û–±–Ω–∞—Ä—É–∂–µ–Ω –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–π data drift!",
    "fields": [
      {"title": "–ú–µ—Ç—Ä–∏–∫–∞", "value": "PSI", "short": true},
      {"title": "–ó–Ω–∞—á–µ–Ω–∏–µ", "value": "0.35", "short": true}
    ]
  }]
}

## –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ retrain

–ü–∞–π–ø–ª–∞–π–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ retrain

- **–°–±–æ—Ä –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ Feature Store**
- **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–æ—á–∏—Å—Ç–∫–∞, feature engineering)**
- **–û–±—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ —Å hyperparameter tuning**
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ**
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–µ–π production –º–æ–¥–µ–ª—å—é**
- **–î–µ–ø–ª–æ–π –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫**